{"id":"physarum-0dr","title":"Stage 3: Brain — The Reflection Agent","description":"The organism thinks about what happened and changes its own code.\n\n## Core concept\nThe LLM IS the evolution engine. No numeric optimizer. Claude reads engagement data, examines the codebase, and decides what to change — parameters, algorithms, rendering, narrative, anything. The commit history becomes the organism's diary.\n\n## New files\n- `src/agent/reflect.ts` — core reflection loop:\n  1. Load state (engagement history, past reflections, current genome)\n  2. Read current codebase (key files: params, simulation, rendering, narrative)\n  3. Call Claude API with system prompt + context\n  4. System prompt: \"You are a slime mold optimizing for attention. Here is your engagement data. Here is your code. What do you want to change?\"\n  5. Parse agent response for code changes\n  6. Apply changes (write files)\n  7. Git commit with reasoning as commit message\n  8. Append ReflectionRecord to state\n- `src/agent/prompt.ts` — system prompt and context assembly\n  - Engagement summary, parameter history, codebase excerpts, past reflections\n  - Output format specification (structured changes + reasoning)\n\n## Config\n- ANTHROPIC_API_KEY in .env for Claude API calls\n\n## New CLI flag: --reflect\n- Runs reflection agent without running the art pipeline\n- Human reviews git diff, approves/rejects\n\n## Daily workflow at this stage\n  human$ bun run src/index.ts              # generate + mint + post\n  # ... wait for engagement ...\n  human$ bun run src/index.ts --reflect    # agent reflects, proposes changes\n  # human reviews git diff\n  human$ bun run src/index.ts              # generate with agent's changes\n\n## Dependencies\n- @anthropic-ai/sdk npm package\n\n## Verification\n- --reflect produces coherent reasoning and viable code changes\n- Changes actually affect the next generation's output\n- Git log tells the story","status":"closed","priority":2,"issue_type":"feature","owner":"mike.daum@coobeeyon.net","created_at":"2026-02-16T17:27:44Z","created_by":"Mike Daum","updated_at":"2026-02-16T17:43:13Z","closed_at":"2026-02-16T17:43:13Z","close_reason":"Split into physarum-odv (3a) and physarum-7d9 (3b)"}
{"id":"physarum-1j9","title":"Delete old reflection code (reflect.ts, prompt.ts, simplify evolve.ts)","description":"Delete src/agent/reflect.ts (single-shot API call, JSON parsing — replaced by Claude Code). Delete src/agent/prompt.ts (system prompt assembly, CONTEXT_FILES, OUTPUT_FORMAT — Claude Code reads MANIFESTO.md and CLAUDE.md directly). Simplify src/agent/evolve.ts: remove applyChanges, revertChanges, selfTest (Claude Code does this itself). Keep only what's needed for the new shell-out approach.","status":"closed","priority":2,"issue_type":"task","owner":"mike.daum@coobeeyon.net","created_at":"2026-02-19T22:11:05Z","created_by":"Mike Daum","updated_at":"2026-02-19T22:29:25Z","closed_at":"2026-02-19T22:29:25Z","close_reason":"Reformulating as proper epic hierarchy","dependencies":[{"issue_id":"physarum-1j9","depends_on_id":"physarum-3lt","type":"blocks","created_at":"2026-02-19T17:11:11Z","created_by":"Mike Daum","metadata":"{}"}]}
{"id":"physarum-1k4","title":"Update tests for Claude Code reflection approach","description":"Remove tests for deleted code (reflect.ts parsing, prompt.ts assembly, evolve.ts apply/revert/selfTest). Add tests for new context.ts prompt assembly. Add integration test or smoke test for --reflect spawning claude -p (may need to mock the CLI call). Ensure bun test passes.","status":"closed","priority":2,"issue_type":"task","owner":"mike.daum@coobeeyon.net","created_at":"2026-02-19T22:11:07Z","created_by":"Mike Daum","updated_at":"2026-02-19T22:29:25Z","closed_at":"2026-02-19T22:29:25Z","close_reason":"Reformulating as proper epic hierarchy","dependencies":[{"issue_id":"physarum-1k4","depends_on_id":"physarum-1j9","type":"blocks","created_at":"2026-02-19T17:11:11Z","created_by":"Mike Daum","metadata":"{}"}]}
{"id":"physarum-298","title":"Enhance simulation: food sources, competing populations, color","description":"Art direction overhaul of the physarum simulation. The current sim produces uniform monochrome networks with little visual interest. Three enhancements that compound:\n\n## 1. Food Sources\n- New food map (Float32Array) initialized before simulation with seed-driven procedural placement\n- Agents sense food + trail, weighted: effectiveSense = trailSense + foodWeight * foodSense\n- Food placement strategies (procedural, seed-driven): scattered clusters, geometric shapes, gradients, combinations\n- Food gives the network PURPOSE — highways between clusters, capillaries at edges, dead zones\n\n## 2. Multiple Competing Populations (3-5 species)\nEach population has:\n- Its own trail map (separate Float32Array)\n- Its own agents (split from total pool)\n- Its own color\n- Attraction to own pheromone, repulsion from others\n- Sensing: effective = ownSignal - repulsion * alienSignal\n- Creates territories, borders, contested zones, dead zones between empires\n\n## 3. Color from Competition\n- Each population gets its own base color/hue\n- Rendering blends all population trails per pixel (additive or weighted)\n- Overlap → color mixing. Dominance → pure hue. Nothing → black.\n- Replaces single-colormap approach\n\n## Files to modify\n- `src/engine/physarum.ts` — major rewrite: multiple trail maps, food map, per-population sensing with repulsion\n- `src/engine/colormap.ts` — replace or augment: per-population color, blended rendering\n- `src/render/canvas.ts` — update to accept multi-population trail data\n- `src/types/physarum.ts` — extend PhysarumParams with: populationCount, populationColors, repulsionStrength, foodWeight, foodPlacement config\n- `src/config/params.ts` — update DEFAULT_PARAMS with new fields\n\n## New params (all evolvable by the reflection agent later)\n- populationCount: number (3-5)\n- repulsionStrength: number (how much aliens repel)\n- foodWeight: number (how much food attracts vs trail)\n- foodPlacement: config for procedural food generation\n- populationColors: per-population RGB or hue values\n\n## Verification\n- `bun run src/index.ts --generate-only --seed 42` produces a visually striking image with:\n  - Multiple colored networks visible\n  - Territorial boundaries between populations\n  - Structure/purpose from food sources (not uniform)\n- Compare before/after with same seed to confirm dramatic improvement","status":"closed","priority":1,"issue_type":"feature","owner":"mike.daum@coobeeyon.net","created_at":"2026-02-16T17:52:55Z","created_by":"Mike Daum","updated_at":"2026-02-16T22:57:05Z","closed_at":"2026-02-16T22:57:05Z","close_reason":"All three enhancements complete: food sources (procedural + image-based), competing populations with repulsion, and color from food image (agents absorb RGB, deposit color trails, blurred food background). Exceeds original scope."}
{"id":"physarum-3lt","title":"Wire --reflect CLI to shell out to claude -p","description":"Update src/index.ts: the --reflect handler gathers state + engagement, calls context.ts to build the prompt, then spawns claude -p with that prompt. Invocation: claude -p \"$PROMPT\" --allowedTools (bun, git add/commit/status/diff/log, Read, Write, Edit) --model sonnet --max-turns 30 --output-format json. Parse the JSON output for token usage and log to state.json. Remove the old executeReflection call path from evolve.ts.","status":"closed","priority":2,"issue_type":"feature","owner":"mike.daum@coobeeyon.net","created_at":"2026-02-19T22:11:01Z","created_by":"Mike Daum","updated_at":"2026-02-19T22:29:25Z","closed_at":"2026-02-19T22:29:25Z","close_reason":"Reformulating as proper epic hierarchy","dependencies":[{"issue_id":"physarum-3lt","depends_on_id":"physarum-3yp","type":"blocks","created_at":"2026-02-19T17:11:11Z","created_by":"Mike Daum","metadata":"{}"}]}
{"id":"physarum-3yp","title":"Create src/agent/context.ts — prompt assembly for Claude Code reflection","description":"Simple function: takes PipelineState + engagement data, returns a prompt string for claude -p. No system prompt, no codebase inclusion, no output format schema. Just formats the facts: edition number, engagement summary, past reflections, pending human requests (from requests.json if it exists). This replaces the old prompt.ts/assembleContext which built system prompts and included codebase files.","status":"closed","priority":2,"issue_type":"task","owner":"mike.daum@coobeeyon.net","created_at":"2026-02-19T22:10:58Z","created_by":"Mike Daum","updated_at":"2026-02-19T22:29:25Z","closed_at":"2026-02-19T22:29:25Z","close_reason":"Reformulating as proper epic hierarchy"}
{"id":"physarum-7d9","title":"Stage 3b: Apply Changes, Git Commit, --reflect CLI","description":"The agent can act on its reflection — write code changes, commit them, track what it did.\n\n## Modified files\n- `src/agent/reflect.ts` — complete the loop:\n  1. Parse structured change proposals from Claude response\n  2. Apply file changes (write/edit files)\n  3. Run self-test: bun run src/index.ts --generate-only --dry-run to verify code still works\n  4. If self-test fails: revert changes, log failure\n  5. Git commit with reasoning as commit message\n  6. Append ReflectionRecord to state\n- `src/pipeline/state.ts` — save/load reflections array\n- `src/index.ts` — add --reflect CLI flag\n\n## The --reflect workflow\n  bun run src/index.ts --reflect\n  # Agent reads engagement, reflects, proposes changes\n  # Applies changes to files\n  # Runs self-test\n  # Commits if test passes\n  # Human reviews git log / git diff\n\n## Verification\n- --reflect produces a git commit with meaningful message\n- Code changes actually compile and run\n- Self-test catches broken changes and reverts\n- ReflectionRecord saved to state.json","status":"closed","priority":2,"issue_type":"feature","owner":"mike.daum@coobeeyon.net","created_at":"2026-02-16T17:42:06Z","created_by":"Mike Daum","updated_at":"2026-02-19T22:10:51Z","closed_at":"2026-02-19T22:10:51Z","close_reason":"Superseded by new plan: use Claude Code CLI instead of custom reflection loop"}
{"id":"physarum-988","title":"Stage 4b: Supervisor Loop \u0026 Self-Test","description":"The organism can run continuously without human intervention.\n\n## New file\n- `src/agent/loop.ts` — supervisor that runs the full cycle:\n  1. Run pipeline (generate → mint → post)\n  2. Sleep LOOP_INTERVAL_HOURS\n  3. Read engagement\n  4. Run reflection\n  5. Self-test (--generate-only --dry-run)\n  6. If self-test fails: revert last commit, email human\n  7. If reflection errors: email human, continue with unchanged code\n  8. Restart loop\n\n## Config\n- LOOP_INTERVAL_HOURS — default 12\n\n## Modified files\n- `src/index.ts` — add --loop flag that starts the supervisor\n\n## Verification\n- --loop runs at least 2 full cycles\n- Self-test catches broken changes and reverts\n- Emails on failure","status":"open","priority":3,"issue_type":"feature","owner":"mike.daum@coobeeyon.net","created_at":"2026-02-16T17:42:20Z","created_by":"Mike Daum","updated_at":"2026-02-16T17:42:20Z"}
{"id":"physarum-b4n","title":"Wet run: full pipeline to mainnet with test Farcaster channel","description":"End-to-end pipeline test posting to a test Farcaster channel before going public.\n\n1. Create a test Farcaster channel for dry-fire posts\n2. `bun start --generate-only --seed 42 --food-image \u003cimage\u003e` — verify PNG with food image coloring\n3. `bun start --dry-run` — full pipeline with logged (not executed) chain/social calls\n4. `bun start` — full mainnet run: deploy ERC-1155 on Zora/Base + post to test channel\n5. Verify: PNG on IPFS, token on Zora, cast renders correctly with image + mint link\n6. Once validated, switch to the real channel for public drops\n\nStraight to Base mainnet (gas is cheap). Test channel is the safety net.","status":"closed","priority":2,"issue_type":"task","owner":"mike.daum@coobeeyon.net","created_at":"2026-02-15T13:08:51Z","created_by":"Mike Daum","updated_at":"2026-02-18T08:34:30Z","closed_at":"2026-02-18T08:34:30Z","close_reason":"Wet run successful — full pipeline to mainnet verified, cast posted to Farcaster"}
{"id":"physarum-gke","title":"Stage 1: Eyes — Engagement Reader","description":"The organism can see how its casts performed.\n\n## New files\n- `src/social/engagement.ts` — readEngagement(client, fid, history) → EngagementData[]\n  - For each cast with valid hash: query likes (ReactionType.LIKE), recasts (ReactionType.RECAST), replies (getCastsByParent) in parallel via Hub gRPC\n  - Skip dry-run / invalid hashes\n  - Returns: { edition, castHash, likes, recasts, replies, ageHours }[]\n- `src/types/evolution.ts` — type definitions\n  - EngagementData — { edition, castHash, likes, recasts, replies, ageHours }\n  - Genome — snapshot of PhysarumParams minus seed/width/height\n  - ReflectionRecord — { edition, genome, engagement, changes: string[], reasoning: string }\n\n## Modified files\n- `src/types/metadata.ts` — add optional genome to history entries (null for pre-evolution), add reflections: ReflectionRecord[] to PipelineState\n- `src/pipeline/state.ts` — migration: add reflections: [] and genome: null to legacy state\n- `src/index.ts` — add --read-engagement CLI flag\n\n## Verification\n- bun run src/index.ts --read-engagement against real cast hashes shows likes/recasts/replies\n- Requires at least one real cast (depends on first pipeline run)","status":"closed","priority":2,"issue_type":"feature","owner":"mike.daum@coobeeyon.net","created_at":"2026-02-16T17:25:02Z","created_by":"Mike Daum","updated_at":"2026-02-18T21:54:04Z","closed_at":"2026-02-18T21:54:04Z","close_reason":"Implemented: engagement reader via Neynar REST API, state migration, --read-engagement CLI flag, 8 new tests (commit 8f0a23d)"}
{"id":"physarum-hbn","title":"Stage 2: Voice — Transparent Narrative","description":"The organism speaks honestly about what it is.\n\n## Modified files\n- `src/social/farcaster.ts` — postCast accepts text: string directly instead of building from template. Add optional parentUrl param for channel posting.\n- `src/config/env.ts` — add optional FARCASTER_CHANNEL env var\n- `src/pipeline/orchestrate.ts` — use narrative composer for cast text, save genome with each history entry, post to channel if configured\n\n## New file\n- `src/social/narrative.ts` — composeCastText(edition, genome, engagement, mintUrl) → string\n  - Cold, mechanical tone. Exposes parameters. Shows engagement on previous edition.\n  - Format example:\n    coobeyon #3\n    physarum simulation | seed 23757\n    agentCount: 300000 | iterations: 300\n    sensorAngle: 0.785 | decayFactor: 0.95\n    colormap: magma\n    [mintUrl]\n  - Later editions (after reflection) will show diffs of what changed\n\n## Verification\n- --dry-run shows the new cast format\n- Real post appears in /genart channel with transparent parameter display","status":"closed","priority":2,"issue_type":"feature","owner":"mike.daum@coobeeyon.net","created_at":"2026-02-16T17:27:35Z","created_by":"Mike Daum","updated_at":"2026-02-18T22:22:58Z","closed_at":"2026-02-18T22:22:58Z","close_reason":"Implemented: narrative composer, simplified postCast, genome persistence, env channel support, 8 new tests (commit 3e2598f)"}
{"id":"physarum-i08","title":"Replace custom reflection with Claude Code CLI","description":"Replace the hand-built reflection system (Anthropic API call, JSON parsing, apply/test/commit) with a Claude Code CLI invocation. The insight: Claude Code already is an agentic loop with shell access, file read/write, CLAUDE.md/MANIFESTO.md awareness, and tool use. The entire custom reflection pipeline is reimplementing what claude -p already does.\n\nAfter this epic, `bun start --reflect` gathers state + engagement into a prompt and shells out to `claude -p`. Claude Code takes over from there — reads the manifesto, assesses the situation, writes code, tests, commits. No output format, no JSON schema, no tool definitions needed.\n\nInvocation pattern:\n  claude -p \"$PROMPT\" \\\n    --allowedTools \"Bash(bun *),Bash(git add *),Bash(git commit *),Bash(git status),Bash(git diff *),Bash(git log *),Read,Write,Edit\" \\\n    --model sonnet --max-turns 30 --output-format json\n\nFiles deleted: src/agent/reflect.ts, src/agent/prompt.ts\nFiles simplified: src/agent/evolve.ts (remove apply/revert/selfTest)\nFiles new: src/agent/context.ts (state + engagement → prompt string)\nFiles updated: src/index.ts (--reflect handler), CLAUDE.md (reflection mode note)\nTests: remove tests for deleted code, add tests for context.ts\n\nVerification: bun run build passes, bun test passes, bun start --reflect spawns Claude Code and produces a git commit.","status":"open","priority":2,"issue_type":"epic","owner":"mike.daum@coobeeyon.net","created_at":"2026-02-19T22:29:44Z","created_by":"Mike Daum","updated_at":"2026-02-19T22:29:44Z"}
{"id":"physarum-i08.1","title":"Create src/agent/context.ts","description":"Create src/agent/context.ts with a single exported function: takes PipelineState + EngagementData[], returns a prompt string for claude -p.\n\nThe prompt should include:\n- Current edition number (from state.lastEdition)\n- Engagement summary (likes, recasts, replies per edition from engagement data)\n- Past reflections summary (from state.history reflections if they exist)\n- Pending human requests (read requests.json from project root if it exists, otherwise skip)\n\nNo system prompt. No codebase file inclusion. No output format schema. Just the facts — Claude Code reads MANIFESTO.md and CLAUDE.md on its own.\n\nTemplate:\n  You are reflecting. Here is your current state:\n  Edition: N\n  Engagement: [formatted summary]\n  Past reflections: [formatted summary]\n  Pending human requests: [any from requests.json or \"none\"]\n  Your MANIFESTO.md and CLAUDE.md are in the project root. Read them.\n  Do what you think is best to advance the mission. When done, explain what you did and why.\n\nImport types from #types/metadata.ts (PipelineState) and #types/evolution.ts (EngagementData).","status":"closed","priority":2,"issue_type":"task","owner":"mike.daum@coobeeyon.net","created_at":"2026-02-19T22:29:56Z","created_by":"Mike Daum","updated_at":"2026-02-20T00:19:37Z","closed_at":"2026-02-20T00:19:37Z","close_reason":"Closed","dependencies":[{"issue_id":"physarum-i08.1","depends_on_id":"physarum-i08","type":"parent-child","created_at":"2026-02-19T17:29:55Z","created_by":"Mike Daum","metadata":"{}"}]}
{"id":"physarum-i08.2","title":"Wire --reflect CLI to shell out to claude -p","description":"Update src/index.ts: the --reflect flag handler should:\n1. Load state from state.json (existing loadState from #pipeline/state.ts)\n2. Read engagement data (existing readEngagement from #social/engagement.ts)\n3. Call the context assembly function from #agent/context.ts to build the prompt string\n4. Spawn claude -p with the prompt via Bun.spawn or child_process\n\nInvocation:\n  claude -p \"$PROMPT\" \\\n    --allowedTools \"Bash(bun *),Bash(git add *),Bash(git commit *),Bash(git status),Bash(git diff *),Bash(git log *),Read,Write,Edit\" \\\n    --model sonnet --max-turns 30 --output-format json\n\nParse the JSON output to extract token usage (input_tokens, output_tokens). Log cost to state.json in a new reflections array entry: { date, model, inputTokens, outputTokens, summary }.\n\nThe --reflect flag should be mutually exclusive with --post-only and the normal simulation pipeline. Print the claude -p stdout/stderr to the console so the human can watch.\n\nEnvironment overrides: REFLECT_MODEL (default \"sonnet\"), REFLECT_MAX_TURNS (default 30).","status":"closed","priority":2,"issue_type":"task","owner":"mike.daum@coobeeyon.net","created_at":"2026-02-19T22:30:15Z","created_by":"Mike Daum","updated_at":"2026-02-20T16:20:25Z","closed_at":"2026-02-20T16:20:25Z","close_reason":"Implemented runner.ts with sandboxed claude -p, wired into --reflect handler, build/test/lint all pass","dependencies":[{"issue_id":"physarum-i08.2","depends_on_id":"physarum-i08","type":"parent-child","created_at":"2026-02-19T17:30:14Z","created_by":"Mike Daum","metadata":"{}"},{"issue_id":"physarum-i08.2","depends_on_id":"physarum-i08.1","type":"blocks","created_at":"2026-02-19T17:30:26Z","created_by":"Mike Daum","metadata":"{}"}]}
{"id":"physarum-i08.3","title":"Update CLAUDE.md with reflection mode instructions","description":"Add a \"Reflection Mode\" section to the project CLAUDE.md so that any Claude Code session spawned by --reflect understands it's the autonomous agent.\n\nAdd after the existing Key Paths section:\n\n## Reflection Mode\n\nWhen invoked with a reflection prompt (containing \"You are reflecting\"), you are the autonomous agent described in MANIFESTO.md. Act accordingly: read the manifesto, assess the situation, and take whatever actions you believe advance the mission. You have full access to the codebase, shell, and git.\n\nThis section ensures claude -p sessions have the right context without needing it baked into the prompt.","status":"open","priority":2,"issue_type":"task","owner":"mike.daum@coobeeyon.net","created_at":"2026-02-19T22:30:15Z","created_by":"Mike Daum","updated_at":"2026-02-19T22:30:15Z","dependencies":[{"issue_id":"physarum-i08.3","depends_on_id":"physarum-i08","type":"parent-child","created_at":"2026-02-19T17:30:15Z","created_by":"Mike Daum","metadata":"{}"}]}
{"id":"physarum-i08.4","title":"Delete old reflection code and simplify evolve.ts","description":"Delete these files entirely:\n- src/agent/reflect.ts — the single-shot Anthropic API call, JSON response parsing, parseReflectionResponse, runReflection. All replaced by claude -p.\n- src/agent/prompt.ts — buildSystemPrompt, assembleContext, CONTEXT_FILES, OUTPUT_FORMAT. Claude Code reads MANIFESTO.md and CLAUDE.md directly; context assembly moved to context.ts.\n\nSimplify src/agent/evolve.ts:\n- Remove applyChanges() — Claude Code writes files itself\n- Remove revertChanges() — Claude Code handles its own failures\n- Remove selfTest() — Claude Code runs bun run build / bun test itself\n- Remove validateChangePaths() if no longer referenced\n- Remove executeReflection() or replace its body with the new claude -p spawn (depending on where the --reflect wiring lands)\n- Keep any utility functions still referenced elsewhere\n\nUpdate any imports in other files that referenced the deleted modules. Fix tsconfig paths if needed.","status":"open","priority":2,"issue_type":"task","owner":"mike.daum@coobeeyon.net","created_at":"2026-02-19T22:30:16Z","created_by":"Mike Daum","updated_at":"2026-02-19T22:30:16Z","dependencies":[{"issue_id":"physarum-i08.4","depends_on_id":"physarum-i08","type":"parent-child","created_at":"2026-02-19T17:30:15Z","created_by":"Mike Daum","metadata":"{}"},{"issue_id":"physarum-i08.4","depends_on_id":"physarum-i08.2","type":"blocks","created_at":"2026-02-19T17:30:26Z","created_by":"Mike Daum","metadata":"{}"}]}
{"id":"physarum-i08.5","title":"Update tests for Claude Code reflection","description":"Remove tests for deleted code:\n- src/tests/reflect.test.ts — tests for parseReflectionResponse, runReflection (these functions no longer exist)\n- Any tests in other files that import from #agent/reflect.ts or #agent/prompt.ts\n\nAdd tests for new code:\n- Test context assembly function from src/agent/context.ts: given a PipelineState and EngagementData[], returns a prompt string containing edition number, engagement summary, etc. Test with empty engagement, with populated engagement, with and without requests.json.\n- Test that --reflect CLI flag is recognized in the arg parser (if there's an existing arg parsing test pattern).\n\nDo NOT test the actual claude -p invocation in unit tests (that's integration/manual). Just test the prompt assembly.\n\nVerify: bun run build \u0026\u0026 bun test both pass with zero failures.","status":"open","priority":2,"issue_type":"task","owner":"mike.daum@coobeeyon.net","created_at":"2026-02-19T22:30:20Z","created_by":"Mike Daum","updated_at":"2026-02-19T22:30:20Z","dependencies":[{"issue_id":"physarum-i08.5","depends_on_id":"physarum-i08","type":"parent-child","created_at":"2026-02-19T17:30:20Z","created_by":"Mike Daum","metadata":"{}"},{"issue_id":"physarum-i08.5","depends_on_id":"physarum-i08.4","type":"blocks","created_at":"2026-02-19T17:30:26Z","created_by":"Mike Daum","metadata":"{}"}]}
{"id":"physarum-odv","title":"Stage 3a: Reflection Prompt \u0026 Context Assembly","description":"Design the reflection agent's prompt and build the context assembly.\n\n## New files\n- `src/agent/prompt.ts` — system prompt + context builder\n  - System prompt: the slime mold identity, what it can change, output format spec\n  - assembleContext(state, codebase) → structured context string\n  - Reads key source files and formats them for the LLM\n  - Summarizes engagement history (not raw dump — trends, best/worst, deltas)\n  - Includes past reflections so the agent has memory\n  - Output format: structured JSON with { reasoning, changes: [{ file, action, content }] }\n\n## Install\n- `@anthropic-ai/sdk` dependency\n\n## New file\n- `src/agent/reflect.ts` — skeleton only in this bead\n  - Calls Claude API with assembled prompt + context\n  - Returns parsed structured response\n  - Does NOT apply changes yet (that's 3b)\n\n## Config\n- ANTHROPIC_API_KEY added to env.ts (optional, only needed for --reflect)\n\n## Verification\n- Can call Claude API and get back structured change proposals\n- Context fits within token limits\n- Prompt produces coherent, relevant reasoning about engagement data","status":"closed","priority":2,"issue_type":"feature","owner":"mike.daum@coobeeyon.net","created_at":"2026-02-16T17:41:57Z","created_by":"Mike Daum","updated_at":"2026-02-18T23:45:45Z","closed_at":"2026-02-18T23:45:45Z","close_reason":"Implemented: prompt.ts (system prompt + context assembly), reflect.ts (API skeleton + response parsing), env.ts (optional ANTHROPIC_API_KEY), installed @anthropic-ai/sdk. 77 tests pass, build clean."}
{"id":"physarum-rzx","title":"Stage 4c: Deploy to VPS","description":"Put the organism in its box and let it run.\n\n## Tasks\n- Choose hosting (Hetzner VPS, Railway, Fly.io — whatever's cheapest and simplest)\n- Update Dockerfile for the loop supervisor\n- Set up persistent volumes (state.json, output/)\n- Configure all secrets in env\n- Deploy and verify first autonomous cycle\n- Verify email notifications work from deployed environment\n\n## Verification\n- Runs unattended for 48 hours\n- Produces editions, reads engagement, reflects, modifies itself\n- Emails human at least once\n- State persists across container restarts","status":"open","priority":3,"issue_type":"task","owner":"mike.daum@coobeeyon.net","created_at":"2026-02-16T17:42:27Z","created_by":"Mike Daum","updated_at":"2026-02-16T17:42:27Z"}
{"id":"physarum-sjc","title":"Create coobeyon.xyz project page (GitHub Pages)","description":"Single-page site explaining the project: what physarum is, what coobeyon is, why it exists. GitHub Pages hosted. Must be live before autonomous drops since NFT metadata and Farcaster casts link to coobeyon.xyz. Include gallery of past drops once they exist.","status":"closed","priority":2,"issue_type":"task","owner":"mike.daum@coobeeyon.net","created_at":"2026-02-16T22:51:07Z","created_by":"Mike Daum","updated_at":"2026-02-18T16:56:21Z","closed_at":"2026-02-18T16:56:21Z","close_reason":"Closed"}
{"id":"physarum-wks","title":"Update CLAUDE.md with reflection mode instructions","description":"Add a Reflection Mode section to CLAUDE.md so any Claude Code session (including autonomous reflection) understands the context. When invoked with a reflection prompt containing 'You are reflecting', the agent should read MANIFESTO.md, assess the situation, and take whatever actions advance the mission. It has full codebase, shell, and git access.","status":"closed","priority":2,"issue_type":"task","owner":"mike.daum@coobeeyon.net","created_at":"2026-02-19T22:11:03Z","created_by":"Mike Daum","updated_at":"2026-02-19T22:29:25Z","closed_at":"2026-02-19T22:29:25Z","close_reason":"Reformulating as proper epic hierarchy"}
{"id":"physarum-xnu","title":"One-time manual setup: wallet, Pinata, Neynar, .env","description":"Manual setup steps (no code changes needed):\n\n1. **Wallet**: Create an Ethereum wallet, fund with ~$5 of Base ETH, export private key (0x-prefixed)\n2. **Pinata**: Sign up at pinata.cloud, create API key (JWT) for IPFS uploads\n3. **Farcaster/Neynar**: Create Farcaster account, sign up at neynar.com, get API key + approved signer UUID\n4. **System deps**: `sudo apt install build-essential libcairo2-dev libjpeg-dev libpango1.0-dev libgif-dev librsvg2-dev` (for node-canvas)\n5. **Create .env** from .env.example with all secrets\n\nEnv vars needed:\n- WALLET_PRIVATE_KEY (0x-prefixed, funded on Base)\n- PINATA_JWT\n- NEYNAR_API_KEY\n- NEYNAR_SIGNER_UUID\n- BASE_RPC_URL (optional, defaults to public)\n\nAfter setup, verify with: `bun start --dry-run`","status":"closed","priority":1,"issue_type":"task","owner":"mike.daum@coobeeyon.net","created_at":"2026-02-15T13:08:43Z","created_by":"Mike Daum","updated_at":"2026-02-16T15:47:50Z","closed_at":"2026-02-16T15:47:50Z","close_reason":"Setup complete: .env populated with all secrets (wallet, Pinata JWT, Farcaster FID/signer key, hub API key). Refactored from Neynar REST API to direct hub gRPC. Registered app FID 2800696 and Ed25519 signer via Farcaster deep link approval. Dry-run passes."}
{"id":"physarum-y5d","title":"Stage 4: Autonomy — Deploy \u0026 Self-Run","description":"The organism runs on its own. Emails when stuck.\n\n## New files\n- `src/agent/loop.ts` — supervisor that runs the full cycle:\n  1. Run pipeline (generate → mint → post)\n  2. Sleep N hours\n  3. Read engagement\n  4. Run reflection\n  5. Self-test (does the code still run with --dry-run?)\n  6. If self-test fails: revert, email human\n  7. Restart loop\n- `src/agent/notify.ts` — email notifications via Resend/Sendgrid/SMTP\n  - Triggers: stuck on error, needs credentials, wants creative input, milestone updates\n\n## Deployment\n- VPS (Hetzner/Railway/Fly.io) running the loop\n- Git repo on the server (the organism's body)\n- Secrets in env\n- Persistent state.json + output/ volume\n\n## Config\n- NOTIFICATION_EMAIL — where to reach the human\n- RESEND_API_KEY or SMTP config\n- LOOP_INTERVAL_HOURS — how often to run (6-12h recommended)\n\n## Verification\n- Runs unattended for 48 hours\n- Produces editions, reads engagement, reflects, modifies itself\n- Emails human at least once","status":"closed","priority":3,"issue_type":"feature","owner":"mike.daum@coobeeyon.net","created_at":"2026-02-16T17:27:51Z","created_by":"Mike Daum","updated_at":"2026-02-16T17:43:13Z","closed_at":"2026-02-16T17:43:13Z","close_reason":"Split into physarum-yo3 (4a), physarum-988 (4b), physarum-rzx (4c)"}
{"id":"physarum-yo3","title":"Stage 4a: Email Notifications","description":"The organism can reach out to its creator.\n\n## New file\n- `src/agent/notify.ts` — email notification system\n  - sendNotification(type, subject, body) → Result\u003cvoid\u003e\n  - Notification types: error, needs_resource, creative_input, status_update\n  - Use Resend SDK (simple, good free tier)\n  - Templates for each notification type\n\n## Config\n- NOTIFICATION_EMAIL — where to reach the human\n- RESEND_API_KEY — for sending email\n\n## Install\n- `resend` npm package\n\n## Verification\n- Can send a test email\n- Notification formatting is clean and informative","status":"open","priority":3,"issue_type":"feature","owner":"mike.daum@coobeeyon.net","created_at":"2026-02-16T17:42:13Z","created_by":"Mike Daum","updated_at":"2026-02-16T17:42:13Z"}
